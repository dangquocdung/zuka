"use strict";window.onload=function(){document.body.style.display="block"},function(e){e(document).ready(function(){e(document).on("keyup",".lastudio-icons-list-wrapper .la-icon-wrap-search",function(){var a=e(this).val(),l=e(this).next(".lastudio-icons-list").find(".la-icon-wrap");l.each(function(){var l=e(this);l.data("name").search(new RegExp(a,"i"))<0?l.hide():l.show()})}),e(window).on("load",function(){function a(){}function l(e){try{JSON.parse(e)}catch(a){return!1}return!0}function t(e){return e===Object(e)}function n(){return p.hasClass("lahfb-frontend-builder-wrap")?!0:!1}function i(l,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],i=l.attr("data-element"),o=l.attr("data-unique-id"),r=i+"_"+o;_.hasOwnProperty(r)||(_[r]={}),!u.children(".lahfb-spinner-wrap").length>0&&u.prepend('<div class="lahfb-spinner-wrap"><div class="lahfb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),e.ajax({type:"POST",url:lahfb_localize.ajaxurl,data:{action:"lahfb_ajax_action",router:"get_component_field",nonce:lahfb_localize.nonce,el_name:i},success:function(a){u.children(".lahfb-spinner-wrap").length>0&&u.children(".lahfb-spinner-wrap").remove(),e(".la-header-builder-wrap").append(a),g=u.find('.lahfb-modal-wrap[data-element-target="'+i+'"]'),g.find(".lahfb-tabs-list").find("li").removeClass("w-active"),g.find(".lahfb-tab-panel").hide(),g.find(".lahfb-tabs-list").find("li:first").addClass("w-active"),g.find(".lahfb-modal-contents").children(".lahfb-tab-panel:first").show();var c=g.find(".lahfb-modal-contents").children(".lahfb-tab-panel");if("desktop-view"==t?c.find('.lahfb-tab-panel[data-id="#all"]').show():"tablets-view"==t?c.find('.lahfb-tab-panel[data-id="#tablets"]').show():"mobiles-view"==t?c.find('.lahfb-tab-panel[data-id="#mobiles"]').show():"sticky-view"==t&&c.find('.lahfb-tab-panel[data-id="#all"]').show(),c.find(".lahfb-tab-panel").find(".lahfb-tab-panel:first").show(),g.show(),g.find(".lahfb-field").each(function(){var a=e(this),l=a.find(".lahfb-field-input"),t=l.data("field-name"),n=l.data("field-std");n="undefined"!=typeof n?n:"","undefined"!=typeof _[r][t]?l.val(_[r][t]):(l.val(n),n&&(_[r][t]=n))}),n){var h=l.find("a").find("i").attr("class");if("sticky-view"==t)y[t][S][x].push({name:i,uniqueId:o,hidden_element:!1,editor_icon:h});else for(var b in k)y[b][S][x].push({name:i,uniqueId:o,hidden_element:!1,editor_icon:h})}if(s(),g.find(".lahfb-dependency").on("change",function(){d(e(this))}),g.find(".lahfb-dependency").trigger("change"),n){var p=l[0].outerHTML;e('.lahfb-elements-item[data-element="'+i+'"][data-unique-id="'+o+'"]').each(function(){e(this).replaceWith(p)})}f(g[0])}}),a()}function d(a){var l=a.data("dependency"),t=a.find(".lahfb-field-input").val();e.each(l,function(a,l){for(var n=0;n<l.length;n++){var i=g.find('.lahfb-field-input[data-field-name="'+l[n]+'"]').closest(".lahfb-field").hide(),s="lahfb-field w-col-sm-12 lahfb-dependency"==i.attr("class")?!0:!1;a==t?(i.show(),s&&d($el)):s&&e.each(i.data("dependency"),function(e,a){for(var l=0;l<a.length;l++)g.find('.lahfb-field-input[data-field-name="'+a[l]+'"]').closest(".lahfb-field").hide()})}})}function s(){var a=e(".lahfb-modal-wrap");a.find(".lahfb-switcher").find(".lahfb-field-input").on("change",function(){var a=e(this);a.is(":checked")?(a.attr("value","true"),a.prop("checked",!0)):(a.attr("value","false"),a.prop("checked",!1))}),a.find(".lahfb-attach-image").each(function(){var a=void 0,l=e(this),t=l.find(".lahfb-add-image"),n=l.find(".lahfb-remove-image"),i=l.find(".lahfb-preview-image");t.on("click",function(e){e.preventDefault();var t=l.find("input.lahfb-attach-image"),d=t.val();return d=d?d:"",a?void a.open():(a=wp.media({multiple:!1}),a.on("select",function(){var e=a.state().get("selection").first().toJSON();i.html("").append('<img src="'+e.url+'" alt="">').css("display","block"),t.attr("value",e.id),n.show()}),void a.open())}),n.on("click",function(e){e.preventDefault();var a=l.find("input.lahfb-attach-image");i.html("").hide(),n.hide(),a.attr("value","")})}),a.find(".lahfb-number-unit").each(function(){var a=e(this),l=a.find('input[type="number"]'),t=a.find(".lahfb-opts").children("span"),n=a.find(".lahfb-field-input");t.on("click",function(a){a.preventDefault();var i=e(this),d=i.data("value"),s=l.val();t.removeClass("lahfb-active"),i.addClass("lahfb-active"),s&&n.attr("value",s+d)}),l.on("change",function(t){t.preventDefault();var i=(e(this),a.find(".lahfb-opts").children("span.lahfb-active").data("value")),d=l.val();d?n.attr("value",d+i):n.attr("value","")})}),a.find(".lahfb-custom-select").find(".lahfb-opts").find("span").on("click",function(){var a=e(this),l=a.closest(".lahfb-custom-select"),t=l.find(".lahfb-opts").children("span"),n=l.find(".lahfb-field-input"),i=a.data("value");t.removeClass("lahfb-active"),a.addClass("lahfb-active"),n.attr("value",i)}),a.find(".lahfb-field-icons-wrap").each(function(){var a=e(this),l=a.find(".la-icon-wrap").find("label"),t=a.find(".lahfb-field-input");l.on("click",function(a){a.preventDefault();var n=e(this),i=n.attr("for");l.removeClass("lahfb-active"),n.addClass("lahfb-active"),t.attr("value",i)})}),a.find(".lahfb-color-picker").wpColorPicker(),a.find(".lahfb-field").find(".lahfb-field-input").each(function(){var a=e(this);if(a.hasClass("lahfb-switcher-field")&&("true"==a.val()?a.prop("checked",!0):a.prop("checked",!1)),a.hasClass("lahfb-field-custom-select")&&a.siblings(".lahfb-opts").find("span").each(function(){var l=e(this);l.removeClass("lahfb-active"),l.data("value")==a.val()&&l.addClass("lahfb-active")}),a.hasClass("lahfb-field-number-unit")){var l=a.val();l?!function(){var t=a.closest(".lahfb-number-unit"),n=t.find('input[type="number"]'),i=t.find(".lahfb-opts").children("span"),d=parseFloat(l),s=l.split(d)[1];n.val(d),i.each(function(){var a=e(this),l=a.data("value");a.removeClass("lahfb-active"),l==s&&a.addClass("lahfb-active")})}():a.closest(".lahfb-number-unit").find('input[type="number"]').val("")}if(a.hasClass("lahfb-icon-field")){var l=a.val(),t=a.closest(".lahfb-field-icons-wrap"),n=t.find(".la-icon-wrap").find("label");l?(n.removeClass("lahfb-active"),t.find(".la-icon-wrap").find('label[for="'+l+'"]').addClass("lahfb-active")):n.removeClass("lahfb-active")}a.hasClass("lahfb-attach-image")&&!function(){var e=a.val(),l=a.siblings(".lahfb-remove-image"),t=a.siblings(".lahfb-preview-image");e&&!wp.media.attachment(e).destroyed?(!g.find(".lahfb-modal-contents").find(".lahfb-spinner-wrap").length>0&&g.find(".lahfb-modal-contents").prepend('<div class="lahfb-spinner-wrap"><div class="lahfb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),wp.media.attachment(e).fetch().done(function(){g.find(".lahfb-modal-contents").find(".lahfb-spinner-wrap").length>0&&g.find(".lahfb-modal-contents").find(".lahfb-spinner-wrap").remove(),t.html("").append('<img src="'+this.attributes.url+'" alt="">').css("display","block"),l.show()})):(t.html("").hide(),l.hide())}()})}function o(){v.sortable({connectWith:".lahfb-elements-place",placeholder:"ui-sortable-placeholder",forcePlaceholderSize:!0,tolerance:"pointer",start:function(a,l){var t=e(l.item);z=t.closest(".lahfb-tab-panel").attr("id"),S=t.closest(".lahfb-columns").attr("data-columns"),x=t.closest(".lahfb-col").attr("data-align-col")},beforeStop:function(l,t){for(var n=e(t.item),i=n.closest(".lahfb-elements-place"),d=(n.data("element"),n.data("unique-id").toString()),s=void 0,o=y[z][S][x],f=0;f<o.length;f++)o[f].uniqueId==d&&(s=o.splice(f,1));S=n.closest(".lahfb-columns").attr("data-columns"),x=n.closest(".lahfb-col").attr("data-align-col");var h=i.children(".lahfb-elements-item").map(function(a,l){return n=e(l),{name:n.data("element"),uniqueId:n.data("unique-id").toString(),hidden_element:JSON.parse(n.data("hidden_element")),editor_icon:n.data("editor_icon")}}).get();y[z][S][x]=h,c(),r(),a()}}).disableSelection()}function f(e){function a(e){e=e||window.event,d=e.clientX,s=e.clientY,document.onmouseup=t,document.onmousemove=l}function l(a){a=a||window.event,n=d-a.clientX,i=s-a.clientY,d=a.clientX,s=a.clientY,e.style.top=e.offsetTop-i+"px",e.style.left=e.offsetLeft-n+"px"}function t(){document.onmouseup=null,document.onmousemove=null}if("undefined"!=typeof e){var n=0,i=0,d=0,s=0;e.getElementsByClassName("lahfb-modal-header")?e.getElementsByClassName("lahfb-modal-header")[0].onmousedown=a:e.onmousedown=a}}function r(){var a=e("#LaStudo_Iframe"),l=void 0,t=void 0;a.length&&(l=a.contents().find("#lastudio-header-builder"),0==l.children(".lahfb-spinner-wrap").length&&l.prepend('<div class="lahfb-spinner-wrap"><div class="lahfb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>')),t=e(".lahfb_save"),t.length&&t.val(lahfb_localize.i18n.saved_text),e.ajax({type:"POST",url:lahfb_localize.ajaxurl,data:{action:"lahfb_ajax_action",router:"save_header_data",nonce:lahfb_localize.nonce,headerPreset:lahfb_localize.prebuild_header_key,frontendComponents:JSON.stringify(C)},success:function(e){n()&&(l[0].outerHTML=e)},complete:function(){}}).done(function(){D?e("#lahfb-publish").trigger("click"):n()&&(document.getElementById("LaStudo_Iframe").contentWindow.LAHFB.core.reloadAllEvents(),e.ajax({type:"POST",url:lahfb_localize.ajaxurl,data:{action:"lahfb_ajax_action",router:"live_dynamic_styles",nonce:lahfb_localize.nonce,headerPreset:lahfb_localize.prebuild_header_key},success:function(e){var n=a.contents().find("#lahfb-frontend-styles-inline-css");n[0].innerHTML=e,t.val(lahfb_localize.i18n.save_text),l.children(".lahfb-spinner-wrap").remove()}}))})}function c(){C=e.extend(!0,{},y);for(var a in C)for(var l in C[a])for(var t in C[a][l]){var n=C[a][l][t];if("settings"==t||"left_settings"==t||"center_settings"==t||"right_settings"==t){var i=n.element,d=n.uniqueId,s=i+"_"+d;s in _&&Object.assign(n,_[s]);for(var o in n)if(n.hasOwnProperty(o)){var f=n[o];"hidden_element"!=o&&"boolean"==typeof f&&(n[o]=String(f))}}else if(0!=n.length){var r=!0,c=!1,h=void 0;try{for(var b,p=n[Symbol.iterator]();!(r=(b=p.next()).done);r=!0){var u=b.value,i=u.name,d=u.uniqueId,s=i+"_"+d;s in _&&Object.assign(u,_[s]);for(var o in u)if(u.hasOwnProperty(o)){var f=u[o];"hidden_element"!=o&&"boolean"==typeof f&&(u[o]=String(f))}}}catch(v){c=!0,h=v}finally{try{!r&&p["return"]&&p["return"]()}finally{if(c)throw h}}}}}function h(e){b(e.target.result)}function b(a){a&&(l(a)||t(a))?(p.css({height:"1px",overflow:"hidden"}).prepend('<div class="lahfb-spinner-wrap"><div class="lahfb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),e("#wpwrap").css("display","none"),a=l(a)?JSON.parse(a):a,_=a.lahfb_data_components,y=a.lahfb_data_editor_components,C=a.lahfb_data_frontend_components,D=!0,r()):alert("Header import input is empty! That's why no data can import.")}var p=e("body"),u=e("#la-header-builder"),v=u.find(".lahfb-elements-place"),m=u.find(".lahfb-desktop-panel").find('.lahfb-columns[data-columns="row1"]').find(".lahfb-elements-place"),w=void 0,g=void 0,_=lahfb_localize.components?lahfb_localize.components:{},y=lahfb_localize.editor_components?lahfb_localize.editor_components:{},C=lahfb_localize.frontend_components?lahfb_localize.frontend_components:{},k={"desktop-view":{},"tablets-view":{},"mobiles-view":{}},x=void 0,S=void 0,z=void 0,D=!1,O=void 0;p.removeClass("admin-bar"),a();for(var q in _)_.hasOwnProperty(q)&&!function(){var a=_[q];if(-1!=q.search("logo")){var l=q.slice("5");u.find('.lahfb-elements-item[data-element="logo"][data-unique-id="'+l+'"]').each(function(){var l=e(this);wp.media.attachment(a.logo).fetch().done(function(){l.children("a").hide().after('<img class="lahfb-img-placeholder-el" src="'+this.attributes.url+'" alt="">')})})}}();if(e("#LaStudo_Iframe").css("height",window.innerHeight-48),e(".lahfb-frontend-builder").niceScroll({cursorborder:"0",background:"#e7e7e7",cursorcolor:"#91989e"}),u.find(".lahfb-tab-panel"+u.find(".lahfb-tabs-list").find("li.w-active").find("a").attr("href")).show(),u.on("click",".lahfb-tabs-list a",function(a){a.preventDefault();var l=e(this),t=l.parent(),n=l.closest("ul").find("li"),i=l.closest("ul");t.hasClass("w-active")||(n.removeClass("w-active"),t.addClass("w-active"),i.hasClass("lahfb-element-groups")?u.find(".lahfb-group-panel").hide().end().find('.lahfb-group-panel[data-id="'+l.attr("href")+'"]').show():i.hasClass("lahfb-styling-groups")?i.siblings(".lahfb-styling-group-panel").hide().end().siblings('.lahfb-styling-group-panel[data-id="'+l.attr("href")+'"]').show():i.hasClass("lahfb-styling-screens")?u.find(".lahfb-styling-screen-panel").hide().end().find('.lahfb-styling-screen-panel[data-id="'+l.attr("href")+'"]').show():u.find(".lahfb-tab-panel:not(.lahfb-group-panel)").hide().end().find(".lahfb-tab-panel"+l.attr("href")).fadeIn(300))}),e("#lahfb-desktop-tab, #lahfb-sticky-tab").on("click",function(a){a.preventDefault(),p.removeClass("lahfb-tablets-device lahfb-mobiles-device"),e(".lahfb-screen-view").hide(),e(".lahfb-desktop-view, .lahfb-sticky-view").show()}),e("#lahfb-tablets-tab").on("click",function(a){a.preventDefault(),p.removeClass("lahfb-mobiles-device"),p.addClass("lahfb-tablets-device"),e(".lahfb-screen-view").hide(),e(".lahfb-tablets-view").show()}),e("#lahfb-mobiles-tab").on("click",function(a){a.preventDefault(),p.removeClass("lahfb-tablets-device"),p.addClass("lahfb-mobiles-device"),e(".lahfb-screen-view").hide(),e(".lahfb-mobiles-view").show()}),u.find(".lahfb-full-modal-btn").on("click",function(a){a.preventDefault();var l=e(this),t=l.data("modal-target"),n=u.find('.lahfb-full-modal[data-modal="'+t+'"]');p.css("overflow","hidden"),n.find("textarea").val(" "),n.fadeIn(200)}),u.find(".lahfb-full-modal-close").on("click",function(e){e.preventDefault(),p.css("overflow","initial"),u.find(".lahfb-full-modal").hide()}),u.on("click",".w-add-element",function(a){a.preventDefault();var l=e(this);u.find(".lahfb-elements").show(),z=l.closest(".lahfb-tab-panel").attr("id"),S=l.closest(".lahfb-columns").attr("data-columns"),x=l.attr("data-align-col")}),u.on("click",".lahfb-modal-header i, .lahfb_close",function(e){e.preventDefault();try{u.find(".lahfb-color-picker").data("wpWpColorPicker").close()}catch(a){}u.find(".lahfb-modal-wrap").hide(),u.find(".lahfb-modal-wrap[data-element-target]").remove()}),u.find(".lahfb-modal-wrap").on("click",".lahfb-elements-item a",function(a){a.preventDefault();var l=e(this),t=(new Date).valueOf(),n=e(this).find("i").attr("class"),d='<span class="lahfb-controls">\n									<span class="lahfb-tooltip tooltip-on-top" data-tooltip="Copy to Clipboard">\n										<i class="lahfb-control lahfb-copy-btn fa fa-clipboard"></i>\n									</span>\n									<span class="lahfb-tooltip tooltip-on-top" data-tooltip="Settings">\n										<i class="lahfb-control lahfb-edit-btn fa fa-pencil-square-o"></i>\n									</span>\n									<span class="lahfb-tooltip tooltip-on-top" data-tooltip="Hide">\n										<i class="lahfb-control lahfb-hide-btn fa fa-eye"></i>\n									</span>\n									<span class="lahfb-tooltip tooltip-on-top" data-tooltip="Remove">\n										<i class="lahfb-control lahfb-delete-btn fa fa-times"></i>\n									</span>\n								</span>';if(l.closest(".lahfb-elements-item").hasClass("lahfb-clipboard-item")){var s=l.parent(),o=s.data("element"),f=s.data("unique-id").toString(),r=o+"_"+f,c=o+"_"+t;for(var h in _)if(_.hasOwnProperty(h)){var b=e.extend(!0,{},_[h]);r==h&&(_[c]=b)}w=O.clone().removeClass("w-col-sm-4").attr({"data-unique-id":t}).prepend(d)}else w=l.parent().clone().removeClass("w-col-sm-4").attr({"data-unique-id":t,"data-hidden_element":!1,"data-editor_icon":n}).prepend(d);u.find('.lahfb-columns[data-columns="'+S+'"]').find(".lahfb-col.col-"+x).find(".lahfb-elements-place").append(w),u.find(".lahfb-modal-wrap").hide(),i(w,z,!0)}),u.on("click",".lahfb-copy-btn",function(a){a.preventDefault();var l=e(this).closest(".lahfb-elements-item").clone();O=l.clone(),e(".lahfb-clipboard-item").remove(),l.removeClass("ui-sortable-handle").addClass("w-col-sm-4 lahfb-clipboard-item"),l.children(".lahfb-controls").remove().end().children("img").remove(),l.children("a").css({display:"block","background-color":"#e3e3e3"}),l.find("i").removeClass("ti-control-record").addClass("ti-clipboard").css("color","#f60"),l.find(".lahfb-element-name").text("Paste (Clipboard)"),e(".lahfb-modal-wrap.lahfb-elements").find(".lahfb-modal-contents").prepend(l)}),u.on("click",".lahfb-delete-btn",function(l){var t=this;l.preventDefault(),confirm("Press OK to delete element, Cancel to leave")&&!function(){var l=e(t).closest(".lahfb-elements-item"),n=l.data("element"),i=l.data("unique-id").toString(),d=n+"_"+i;if(z=l.closest(".lahfb-tab-panel").attr("id"),S=l.closest(".lahfb-columns").attr("data-columns"),x=l.closest(".lahfb-col").attr("data-align-col"),delete _[d],"sticky-view"==z)for(var s=y[z][S][x],o=0;o<s.length;o++)s[o].uniqueId==i&&s.splice(o,1);else{var f=function(e){var a=y[e];!function(){for(var e in a){var l=a[e];for(var t in l)for(var n=l[t],d=0;d<n.length;d++)if(n[d].uniqueId==i)return void n.splice(d,1)}}()};for(var h in k)f(h)}c(),r(),a(),u.find('.lahfb-elements-item[data-element="'+n+'"][data-unique-id="'+i+'"]').remove()}()}),u.on("click","#lahfb-saveastpl",function(a){a.preventDefault();var l=u.find(".lahfb-modal-save-header");g=l,l.show(),s(),l.find(".lahfb-dependency").on("change",function(){d(e(this))}),l.find(".lahfb-dependency").trigger("change")}),u.on("click",".lahfb_save_as_template",function(a){a.preventDefault();var l=u.find(".lahfb-modal-save-header"),t=l.find('select[data-field-name="lahfb_save_header_type"]'),n=l.find('select[data-field-name="lahfb_save_header_type_existing"]'),i=l.find('input[data-field-name="lahfb_save_header_type_new"]'),d=l.find('input[data-field-name="lahfb_save_header_custom_image"]');if("add_new"==t.val()&&""==i.val())return alert("Please enter the new header name !"),!1;if("update"==t.val()&&0==e("option",n).length)return alert("Sorry currently you haven't any data yet - please use Add New method"),!1;var s={action:"lahfb_ajax_action",router:"save_header_as_template",nonce:lahfb_localize.nonce,frontendComponents:JSON.stringify(C),header_name:"",header_key:"",header_image:""};""!=d.val()&&(s.header_image=d.val()),"add_new"==t.val()&&(s.header_name=i.val()),"update"==t.val()&&(s.header_name=e("option:selected",n).text(),s.header_key=n.val()),e.ajax({type:"POST",url:lahfb_localize.ajaxurl,data:s,dataType:"json",success:function(a){if(a.success){var t="";for(var n in a.data){var i=a.data[n];t+="undefined"!=typeof i.image?'<a class="lahfb-prebuild-item" data-saved-name="'+n+'" href="#"><img src="'+i.image+'" alt="'+i.name+'"/></a>':'<a class="lahfb-prebuild-item" data-saved-name="'+n+'" href="#">'+i.name+"</a>"}e(".lahfb-predefined-modal-contents").html(t),alert("Saved successfully!"),l.hide()}else alert("Sorry, please try again!")}})}),u.on("click",".lahfb-edit-btn",function(a){a.preventDefault();var l=e(this);u.find(".lahfb-modal-wrap").hide(),u.find(".lahfb-modal-wrap[data-element-target]").remove(),w=l.closest(".lahfb-elements-item"),z=l.closest(".lahfb-tab-panel").attr("id"),i(w,z)}),u.on("click",".w-edit-column",function(a){a.preventDefault();var l=e(this);u.find(".lahfb-modal-wrap").hide(),u.find(".lahfb-modal-wrap[data-element-target]").remove(),w=l,z=l.closest(".lahfb-tab-panel").attr("id"),i(w,z)}),u.find(".lahfb-tabs-panels").find(".lahfb-columns").children('.lahfb-elements-item[data-hidden_element="true"]').find("i.lahfb-hide-btn").removeClass("fa fa-eye").addClass("fa fa-eye-slash").closest(".lahfb-columns").addClass("lahfb-columns-hidden").css("opacity","0.45"),u.find(".lahfb-elements-place").find('.lahfb-elements-item[data-hidden_element="true"]').find("i.lahfb-hide-btn").removeClass("fa fa-eye").addClass("fa fa-eye-slash"),u.on("click",".lahfb-hide-btn",function(l){l.preventDefault();var t=e(this),n=t.closest(".lahfb-elements-item"),i=n.data("element"),d=n.data("unique-id").toString(),s=void 0;if(z=n.closest(".lahfb-tab-panel").attr("id"),S=n.closest(".lahfb-columns").attr("data-columns"),x=n.closest(".lahfb-col").attr("data-align-col"),"header-area"==i||"sticky-area"==i){var o=y[z][S].settings.hidden_element;y[z][S].settings.hidden_element=!o,s=!o,n.attr("data-hidden_element",!o).data("hidden_element",!o);var f=n.closest(".lahfb-columns");s?(t.removeClass("fa fa-eye").addClass("fa fa-eyeslash"),f.addClass("lahfb-columns-hidden").css("opacity","0.45")):(t.removeClass("fa fa-eye-slash").addClass("fa fa-eye"),f.removeClass("lahfb-columns-hidden").css("opacity","1"))}else{for(var h=y[z][S][x],b=0;b<h.length;b++){var p=h[b];if(p.uniqueId==d){p.hidden_element=!p.hidden_element,s=p.hidden_element,n.attr("data-hidden_element",p.hidden_element).data("hidden_element",p.hidden_element);break}}s?(t.removeClass("fa fa-eye").addClass("fa fa-eye-slash"),n.find("a").css("color","#888"),n.addClass("lahfb-columns-hidden").css("opacity","0.45")):(t.removeClass("fa fa-eye-slash").addClass("fa fa-eye"),n.find("a").css("color","#0073aa"),n.removeClass("lahfb-columns-hidden").css("opacity","1"))}c(),r(),a()}),u.on("click",".lahfb_save",function(l){l.preventDefault();var t=(e(this),w.data("element")),i=w.data("unique-id"),d=t+"_"+i;g.find(".lahfb-field").each(function(){var a=e(this),l=a.find(".lahfb-field-input"),t=l.data("field-name"),n=l.val();""==n?_[d].hasOwnProperty(t)&&(_[d][t]=n):void 0!=n&&("string"==typeof n&&-1!=n.indexOf('"')&&(n=n.replace(/"/g,"'")),_[d][t]=n)}),c(),r(),a();var s=w[0].outerHTML,o=u.find('.lahfb-elements-item[data-element="'+t+'"][data-unique-id="'+i+'"]');o.each(function(){e(this).replaceWith(s)}),o=u.find('.lahfb-elements-item[data-element="'+t+'"][data-unique-id="'+i+'"]'),g.find(".lahfb-field.lahfb-placeholder").each(function(){var a=e(this);if(a.hasClass("lahfb-img-placeholder")&&!function(){var e=a.find(".lahfb-field-input").val();e?wp.media.attachment(e).fetch().done(function(){!o.children(".lahfb-img-placeholder-el").length>0?o.attr("data-img-placeholder",e).children("a").hide().after('<img class="lahfb-img-placeholder-el" src="'+this.attributes.url+'" alt="" />'):o.children(".lahfb-img-placeholder-el").attr("src",this.attributes.url)}):o.removeAttr("data-img-placeholder").children("a").show().end().children(".lahfb-img-placeholder-el").remove()}(),a.hasClass("lahfb-text-placeholder")){var l=a.find(".lahfb-field-input").val();l.trim()?!o.find("a").find(".lahfb-text-placeholder-el").length>0?o.find("a").find(".lahfb-element-name").hide().after('<span class="lahfb-text-placeholder-el">'+l+"</span>"):o.find("a").find(".lahfb-text-placeholder-el").html(l):o.find("a").find("span.lahfb-element-name").show().end().end().find(".lahfb-text-placeholder-el").remove()}}),n()||(u.find(".lahfb-modal-wrap").hide(),u.find(".lahfb-modal-wrap[data-element-target]").remove())}),o(),f(e(".lahfb-modal-wrap")[0]),e("#lahfb-publish").on("click",function(){0==u.children(".lahfb-spinner-wrap").length&&u.prepend('<div class="lahfb-spinner-wrap"><div class="lahfb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>');var a=e("#LaStudo_Iframe").contents().find("#lastudio-header-builder");0==a.children(".lahfb-spinner-wrap").length&&a.prepend('<div class="lahfb-spinner-wrap"><div class="lahfb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),e.ajax({type:"POST",url:lahfb_localize.ajaxurl,data:{action:"lahfb_ajax_action",router:"publish_header",nonce:lahfb_localize.nonce,frontendComponents:JSON.stringify(C)},success:function(){u.children(".lahfb-spinner-wrap").remove(),a.children(".lahfb-spinner-wrap").remove(),D&&location.reload()}})}),e(".lahfb-action-collapse").on("click",function(){var a=e(this),l=e(".la-header-builder-wrap.lahfb-frontend-builder").css("bottom","-60%"),t=e(".lahfb-actions").css("bottom","0");a.hasClass("lahfb-open")?(l.css("bottom","-60%"),t.css("bottom","0"),a.removeClass("lahfb-open"),a.children("i").attr("class","dashicons dashicons-upload")):(l.css("bottom","0"),t.css("bottom","60%"),a.addClass("lahfb-open"),a.children("i").attr("class","dashicons dashicons-download"))}),e.lahfbGetMultiScripts=function(a,l){var t=e.map(a,function(a){return e.getScript((l||"")+a)});return t.push(e.Deferred(function(a){e(a.resolve)})),e.when.apply(e,t)},e.getStylesheet=function(a){var l=e.Deferred(),t=e("<link/>",{rel:"stylesheet",type:"text/css",href:a}).appendTo("head");return l.resolve(t),l.promise()},n(),e("#lahfb-import").change(function(){var e=event.target.files[0],a=new FileReader;a.onload=h,a.readAsText(e)}),e(document).on("click",".lahfb-prebuild-item",function(a){if(a.preventDefault(),"undefined"!=typeof e(this).attr("data-file-name")){if(confirm("Your selected header pre-defined will apply on current elements and settings. Are you sure you want to overwrite?")){var l=e(this).attr("data-file-name"),t=lahfb_localize.prebuilds_url+l;e.ajax({dataType:"json",type:"POST",url:t,success:function(e){b(e)}})}}else window.location.href=e(this).attr("href")}),"vertical"==y["desktop-view"].row1.settings.header_type){var j=u.find(".lahfb-tabs-panels"),P=j.find("#desktop-view").children('.lahfb-columns[data-columns="row1"]').children(".lahfb-elements-item"),I=e("#lahfb-vertical-header");P.attr("data-element","vertical-area"),I.find("span").text("Horizontal Header"),j.addClass("lahfb-vertical-header-panel"),m.sortable({axis:"y"})}u.on("click","#lahfb-vertical-header",function(l){l.preventDefault();var t=e(this),n=e(".lahfb-tabs-list"),i=u.find(".lahfb-tabs-panels"),d=i.find("#desktop-view").children('.lahfb-columns[data-columns="row1"]').children(".lahfb-elements-item"),s=y["desktop-view"].row1.settings,o=s.header_type;"horizontal"==o?(s.element="vertical-area",d.attr("data-element","vertical-area"),s.header_type="vertical",t.find("span").text(lahfb_localize.i18n.horizontal_header_text),i.addClass("lahfb-vertical-header-panel"),m.sortable({axis:"y"})):(s.element="header-area",d.attr("data-element","header-area"),s.header_type="horizontal",t.find("span").text(lahfb_localize.i18n.vertical_header_text),i.removeClass("lahfb-vertical-header-panel"),m.sortable({axis:""}),e("#wrap").removeClass("lahfb-header-vertical-toggle")),c(),r(),a(),n.find("li").removeClass("w-active"),n.find("li:first-child").addClass("w-active"),e(".lahfb-tab-panel").hide(),e("#desktop-view").show()})})})}(jQuery);
